<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd"> 

<mapper namespace="member">

	<!-- 태그 리스트 보여주기 -->
	<resultMap type="HashMap" id="tagListMap">
		<result property="TAG_UID"	column="tag_UID"	javaType="String"/>
		<result property="TAG_TYPE"	column="tag_type"	javaType="String"/>
		<result property="TAG_NAME"	column="tag_name"	javaType="String"/>
	</resultMap>

	<select id="selectRecommendTagList" resultMap="tagListMap">
		select tag_UID, tag_type, tag_name
		from recommend_tag
		order by tag_UID
	</select>
	
	<select id="selectMemberSeq" resultType="int">
		select seq_member.nextval
		from dual
	</select>
	
	<insert id="insertMemberByMvo" parameterType="com.final2.petopia.model.MemberDAO">
		insert into member(idx, userid, pwd, name, nickname, birthday, gender, phone, profileimg, fileName, membertype)
		values(#{idx}, #{userid}, #{pwd}, #{name}, #{nickname}, #{birthday}, #{gender}, #{phone}, #{profileimg}, #{fileName}, 1)
	</insert>
	
	<insert id="insertLogin_logByMvo" parameterType="com.final2.petopia.model.MemberDAO">
		insert into login_log(idx, fk_userid, fk_pwd, lastlogindate)
		values(#{idx}, #{userid}, #{pwd}, sysdate)
	</insert>
	
	<insert id="insertHave_tagByTagList" parameterType="HashMap">
		insert into have_tag(fk_tag_UID, fk_idx, fk_tag_name) values
		(#{FK_TAG_UID}, #{FK_IDX}, #{FK_TAG_NAME})
	</insert>

</mapper>