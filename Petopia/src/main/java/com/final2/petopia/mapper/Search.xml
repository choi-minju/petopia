<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd"> 

<mapper namespace="search">
	
	<select id="addrCount" parameterType="String" resultType="int">
		select count(*) as addrCnt
		from biz_info
		where addr1 like '%' || #{searchWord} || '%'
	</select>

	<select id="hsptalCount" parameterType="String" resultType="int">
		select count(*) as hsptalCnt
		from member M JOIN biz_info B
		on M.idx = B.idx_biz
		where membertype = 2 and biztype = 1 and name like '%' || #{searchWord} || '%'
	</select>

	<select id="pharmCount" parameterType="String" resultType="int">
		select count(*) as pharmCnt
		from member M JOIN biz_info B
		on M.idx = B.idx_biz
		where membertype = 2 and biztype = 2 and name like '%' || #{searchWord} || '%'
	</select>
	
	<select id="getFullnameAndIdx" parameterType="String" resultType="com.final2.petopia.model.Biz_MemberVO">
		select idx as idx_biz, name
		from member
		where name like '%' || #{searchWord} || '%'
	</select>

</mapper>